<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.88, user-scalable=no, maximum-scale=0.88"/>
    <title>Bilan_html</title>
    <link href="../../engine/css/screens.min.css" rel="stylesheet" type="text/css"/>
    <link href="../../engine/css/fonts.css" rel="stylesheet" type="text/css"/>
    <link href="../../engine/css/customization.css" rel="stylesheet" type="text/css"/>
    <link href="css/screen.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" charset="UTF-8" src="../../engine/js/polyfills/css-vars-ponyfill.min.js"></script>
    <script type="text/javascript" src="../../engine/js/polyfills/webp-polyfills.js"></script>
    <script type="text/javascript" src="../../engine/js/polyfills/webp-hero.bundle.js"></script>
    <script type="text/javascript" charset="UTF-8" src="../../engine/js/jquery.min.js"></script>
    <script type="text/javascript" charset="UTF-8" src="../../engine/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" charset="UTF-8" src="../../engine/js/angular.min.js"></script>
    <script type="text/javascript" charset="UTF-8" src="../../engine/js/modernizr-custom.js"></script>
    <script type="text/javascript" charset="UTF-8" src="js/app-run.js"></script>
    <script type="text/javascript" charset="UTF-8" src="js/app-controler.js"></script>
    <script type="text/javascript" charset="UTF-8" src="localisation/localisation.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script type="text/javascript" charset="UTF-8">
        //obfusquer
        this.tracker = null;
        this.params = {
            //Texte du titre
            title: "Your Scoring",
            //Enoncé de l'exercice
            statement: "Well done, you finished the course!",
            //Nombre maximal de tentatives
            maxAttempts: -1,
            //Parametres du certificat, valeur par défaut false
            certificate: false,
            certificate_title: "TitreFormation",
            certificate_desc: "NatureDeFormation",
            certificate_duration: "20_Minutes",
            certificate_comment: "<span>[firstname] [name] complete this e-learning course with success, the [date]<\/span>",
            objectives: {
                "objective_1": {
                    text: ""
                },
                "objective_2": {
                    text: ""
                },
                "objective_3": {
                    text: ""
                },
                "objective_4": {
                    text: ""
                },
                "objective_5": {
                    text: ""
                },
                "objective_6": {
                    text: ""
                },
                "objective_7": {
                    text: ""
                },
                "objective_8": {
                    text: ""
                },
                "objective_9": {
                    text: ""
                },
            },
            //Affiche ou masque la liste des themes, valeur par défaut false
            displayThemes: true,
            //Affiche ou masque le score précédent, valeur par défaut false
            displayPrevious: true,
            feedbackAttemptRight: "Congratulations, you succeed to reach the expected level",
            //Lorsqu'échouée
            feedbackAttemptWrong: "Sorry, you did not succeeded to reach the targeted level, try again!",
            feedbackText:"Texte de feedback",
            //son associé à l'écran
            sound: "",
            illustrationGood:"success.jpg",
            illustrationGoodAlt:"happy alt",
            illustrationBad:"failure.jpg",
            illustrationBadAlt:"sad alt"
        };
        var bridge = null;

        function setTracker(pBridge) {
            bridge = pBridge;
            setTimeout(function(){
                //Initialisation du jeu lorsque la communication avec la meta à été établie
                $("#container").scope().init();
                $("#container").scope().$apply();
            }, 10);
        }

        //finobfusquer
    </script>
    <svg aria-hidden="true" focusable="false" id="svg" height="0" width="0"
         style="position:absolute;margin-left: -100%;">
        <defs>
            <g id="icon-bilan">
                <path d="M71.789,11.625C65.264,4.237,55.863,0,45.996,0c-1.176,0-2.131,0.955-2.131,2.129V34.4
                c-0.006,0.573,0.209,1.106,0.607,1.509c0.404,0.409,0.945,0.634,1.523,0.634h32.269c1.183,0,2.144-0.961,2.144-2.143
                C80.408,25.996,77.348,17.908,71.789,11.625z M48.121,32.27V4.33l0.799,0.078c7.605,0.743,14.584,4.311,19.65,10.047
                c4.235,4.797,6.792,10.682,7.393,17.018l0.076,0.796H48.121z"/>
                <path d="M69.41,42.008H37.917V10.528c0-1.182-0.963-2.144-2.148-2.144C16.045,8.385,0,24.429,0,44.152
                c0,19.725,16.045,35.771,35.768,35.771c19.724,0,35.771-16.047,35.771-35.771C71.539,42.971,70.584,42.008,69.41,42.008z
                M67.127,47.095c-0.723,7.767-4.307,14.964-10.094,20.271c-5.824,5.34-13.377,8.279-21.265,8.279
                c-17.366,0-31.495-14.127-31.495-31.492c0-7.889,2.941-15.441,8.282-21.267c5.305-5.786,12.505-9.371,20.273-10.094l0.795-0.074
                v31.434c0,1.175,0.955,2.131,2.13,2.131h31.376L67.127,47.095z"/>
            </g>
        </defs>
    </svg>
</head>

<body ng-app="cannelle_app" id="bilan">
<div id="container"
     role="main"
     ng-controller="cannelle_appCtrl">
    <div class="container-fluid">
        <div class="row delayed h-100 fh-100 minh-100 align-items-center justify-content-center">
            <!--Version écran-->
            <div class="col-12 col-sm-12 col-md-11 col-lg-11 col-xl-10 col-tablet d-md-flex justify-content-center flex-column align-items-stretch no-print">
                <div class="d-md-flex w-100 justify-content-center align-items-stretch delayed content">
                    <div class="col col-content sticky-md d-md-flex fadeInDown maxh-100 minh-100 px-0 pr-md-3 pr-xl-4"
                         ng-switch="getIconForScore(getTotalScore())">
                        <div class="m-auto d-flex flex-column w-md-100 h-100 fadeInUp px-0 px-md-3">
                            <div class="rounded overflow-hidden justify-content-center align-items-center m-auto">
                                <img class="rounded img-fluid mh-100"
                                     src="{{illustrationGood}}"
                                     alt="{{illustrationGoodAlt}}"
                                     ng-switch-when="good"/>
                                <img class="rounded img-fluid mh-100"
                                     src="{{illustrationBad}}"
                                     alt="{{illustrationBadAlt}}"
                                     ng-switch-when="bad"/>
                            </div>
                        </div>
                    </div>
                    <div class="col col-content align-self-center mt-0 mb-3 my-md-3 fadeInUp delayed py-0 py-md-3 py-lg-5 py-xl-5 pl-md-3 pl-xl-4 px-0">
                        <div class="m-auto d-md-flex flex-column w-100 pb-3 secondary-color">
                            <h2 class="text-center text-md-left display-3 font-weight-normal p-0 py-xl-3 p-md-0 h1 title-color">
                                {{getTotalScore()}}%
                            </h2>
                            <h3 class="text-center text-md-left pt-0 pb-4 pt-md-1 h5">
                                <span class="bg-secondary-color badge badge-pill on-secondary-color font-weight-normal py-2 px-3 shadow-sm">
                                    {{getTotalScorebis()}} / {{getTotalMaxScore()}} {{getLocalisedString('label_points')}}
                                </span>
                                <span class="bg-secondary-color badge badge-pill on-secondary-color font-weight-normal py-2 px-3 shadow-sm">
                                    {{getTotalTime()}}
                                </span>
                            </h3>
                            <!--Bandeau Titre-->
                            <div class="d-md-flex justify-content-center align-items-center no-print text-color">
                                <div id="bandeau-titre" class="d-flex w-100 bandeau px-1">
                                    <h4 class="fadeInDown blockquote my-3 px-3 py-1 h1"
                                        ng-if="statement !== ''"
                                        ng-bind-html="statement"></h4>
                                </div>
                            </div>
                            <!--Feedback échec-->
                            <p class="card-text text-color"
                               ng-if="winOrFail(getTotalScore())==1"
                               ng-bind-html="feedbackAttemptWrong">
                            </p>
                            <!--Feedback réussite-->
                            <p class="card-text text-color"
                               ng-if="winOrFail(getTotalScore())==2"
                               ng-bind-html="feedbackAttemptRight">
                            </p>
                            <p class="card-text text-color"
                               ng-if="winOrFail(getTotalScore())==3"
                               ng-bind-html="feedbackText">
                            </p>
                            <div class="m-auto d-md-flex flex-column w-100 delayed secondary-color">
                                <!--Thèmes-->
                                <ul class="list-group shadow-sm"
                                    ng-if="displayThemes">
                                    <li class="list-group-item d-flex justify-content-between align-items-center fadeInUp"
                                        ng-repeat="theme in themes" >
                                        <div class="media">
                                            <div class="align-self-center"
                                                 ng-bind-html="theme.id">
                                            </div>
                                        </div>
                                        <div>
                                            <span class="bg-secondary-color badge badge-pill on-secondary-color">
                                                {{getFormattedScore(theme.score, theme.scoremax)}}%
                                            </span>
                                            <span class="bg-secondary-color badge badge-pill on-secondary-color">
                                                {{getFormattedTime((theme.time))}}
                                            </span>
                                        </div>
                                    </li>
                                </ul>
                                <!--Input fields for certificate-->
                                <form id="input-fields-for-certificate" class="delayed"
                                      ng-if="certificate">
                                    <div class="row">
                                        <div class="col">
                                            <div class="input-group flex-nowrap mt-2 shadow-sm">
                                                <div class="input-group-prepend">
                                                    <span id="input-firstname" class="input-group-text on-secondary-color bg-secondary-color"
                                                          ng-bind-html="getLocalisedString('label_firstname')">
                                                    </span>
                                                </div>
                                                <input class="form-control"
                                                       type="text" placeholder="{{getLocalisedString('label_firstname')}}"
                                                       aria-label="{{getLocalisedString('label_firstname')}}" aria-describedby="input-firstname"
                                                       ng-model="printmodel.firstname">
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="input-group flex-nowrap mt-2 shadow-sm">
                                                <div class="input-group-prepend">
                                                    <span id="input-name" class="input-group-text on-secondary-color bg-secondary-color"
                                                          ng-bind-html="getLocalisedString('label_name')">
                                                    </span>
                                                </div>
                                                <input class="form-control"
                                                       type="text" placeholder="{{getLocalisedString('label_name')}}"
                                                       aria-label="{{getLocalisedString('label_name')}}" aria-describedby="input-name"
                                                       ng-model="printmodel.name">
                                            </div>
                                        </div>
                                    </div>
                                </form>
                                <!--Bouton impression certificat de réussite-->
                                <button class="btn btn-block btn-outline-primary mt-3 shadow-sm fadeInUp"
                                        type="button"
                                        ng-if="certificate"
                                        ng-click="printPage()"
                                        ng-bind-html="getLocalisedString('label_print')">
                                    <svg class="fill-black icon-tiny">
                                        <use href="#icon-bilan">
                                        </use>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <!--Score précédent-->
                        <ul ng-if="displayPrevious" class="list-group shadow-sm mt-3 fadeInUp">
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <div class="media"
                                     ng-switch="getIconForScore(getPreviousTotalScore())">
                                    <img class="icon-medium mr-3"
                                         src="{{illustrationGood}}"
                                         alt="{{illustrationGoodAlt}}"
                                         ng-switch-when="good">
                                    <img class="icon-medium mr-3"
                                         src="{{illustrationBad}}"
                                         alt="{{illustrationBadAlt}}"
                                         ng-switch-when="bad" >
                                    <div class="align-self-center mr-3"
                                         ng-bind-html="getLocalisedString('label_previous_score')">
                                    </div>
                                </div>
                                <div>
                                    <span class="bg-secondary-color badge badge-pill on-secondary-color">
                                        {{getPreviousTotalScore()}}%
                                    </span>
                                    <span class="bg-secondary-color badge badge-pill on-secondary-color">
                                        {{getFormattedTime(getPreviousTotalTime())}}
                                    </span>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!--EndOf version écran-->

            <!--Version print-->
            <div class="book certificate secondary-color">
                <div class="sub">
                    <div class="pagecontent text-color d-flex align-items-center justify-content-center">
                        <div class="certificate_content">
                            <div class="certificate_logo my-4 round">
                                <img class="img-responsive logo"
                                     src="../../engine/img/logo.jpg">
                            </div>
                            <div class="certificate_title"
                                 ng-if="certificate_title != '<b>HTML non interprêté<\/b> Titre de la formation'">
                                <p ng-bind-html="certificate_title">
                                </p>
                            </div>
                            <div class="certificate_subtitle">
                                <p ng-bind-html="getCertificateComment()">
                                </p>
                            </div>
                            <div class="certificate_badge font-wheight-bolder secondary-color">
                                <p>
                                    {{getTotalScore()}}%
                                </p>
                            </div>

                            <div class="position-relative certificate_desc"
                                 ng-bind-html="certificate_desc"
                                 ng-if="certificate_desc != '<span><b>HTML interprêté<\/b> Description de la formation<\/span>'">
                            </div>
                            <h4>
                                {{getTotalTime()}}
                            </h4>

                            <div class="row px-5 mx-3 pt-2" ng-if="objectives.text != ''">
                                <div class="card shadow-sm col-4 mb-2" ng-repeat="objective in objectives" ng-if="objective.text != ''">
                                    <div class="card-body p-2">
                                        <p class="card-text" ng-bind-html="objective.text"></p>
                                    </div>
                                </div>
                            </div>
                            <ul class="list-group shadow-sm mt-3"
                                ng-if="displayThemes">
                                <li class="list-group-item d-flex justify-content-between align-items-center"
                                    ng-repeat="theme in themes">
                                    <div class="media">
                                        <div class="align-self-center"
                                             ng-bind-html="theme.id">
                                        </div>
                                    </div>
                                    <div>
                                        <span class="bg-secondary-color badge badge-pill on-secondary-color">
                                            {{getFormattedTime(theme.time)}}
                                        </span>
                                        <span class="bg-secondary-color badge badge-pill on-secondary-color">
                                            {{getFormattedScore(theme.score, theme.scoremax)}} %
                                        </span>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!--EndOf version print-->

        </div>
    </div>
</div>
</body>

</html>
